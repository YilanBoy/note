# Vim

簡單紀錄 Vim 的一些快捷鍵

## 模式 (Mode)

- Normal Mode (Keep Mode)
- Insert Mode
- Visual Mode

## 設定

- 可以輸入 `:` 進入指令模式，可以輸入指令或修改 Vim 的設定

  ```text
  set rnu
  set tabstop=4
  set shiftwidth=4
  set expandtab
  set autoindent
  colorscheme slate
  ```

- 想要儲存 Vim 的設定可以使用 `~/.vimrc`

## Normal Mode

### 移動

- 游標移動 `h j k l` 對應 `← ↓ ↑ →`
- 因為雙手在鍵盤上的固定位置，`j` 是在右手食指上，且程式碼照理說是往下寫，因此 `j` 很自然是往下鍵
- 可以搭配數字使用，例如輸入 `5j`，代表往下移動五行
- 建議開啟 vim 的 set relative number 功能，這樣就可以很方便的使用數字鍵進行移動

  ```text
  set rnu
  set relativenumber
  ```

- 斜向的移動，IDE 建立可以使用 AceJump 這個套件來進行移動
- `w` 與 `W` : 根據字串在行上往後移動，會移動到字串的**首字元**
  - `w` 會視特殊字元斷句 (除了 `_`)
  - `W` 只認空白字元為斷句
- `e` 與 `E` : 根據字串在行上往後移動，會移動到字串的**尾字元**
- `b` 與 `B` : 根據字串在行上往前移動，會移動到字串的首字元
- `^` : 移動到行頭
- `$` : 移動到行尾，`0` 也有同樣的功能
- `+` : 移動到下一行的行頭，等同於 `j^`
- `-` : 移動到上一行的行頭，等同於 `k^`
- `%` : 移動到成對符號 (例如 : `{}` 與 `()`)
- `gg` 與 `G` : 移至該檔案的第一行與移至檔案的最後一行
- `{` 與 `}` : 移動至下一個段落
- `H` : 移動至視窗的最上方
- `L` : 移動至視窗的最下方
- `M` : 移動至視窗的正中間

### 搜尋

- `f` 與 `F` : 在該行上搜尋字元並跳過去，一樣可以搭配數字使用
  - `f` : 在行上往後找
  - `F` : 在行上往前找
- `t` 與 `T` : 在剛行上搜尋字元並跳到該字元的**前一個字元**
  - `t` : 在行上往後找
  - `T` : 在行上往前找
- `;` : 重複剛剛的搜尋動作
- `,` : 返回剛剛使用 `;` 前的位置
- 輸入 `:` 進入指令模式之後，可以使用 `/` 使用關鍵字，搜尋的結果可使用 `n` 與 `N` 前往下一個結果或是上一個結果

## 選取

- `v` 與 `V` : 進入選取模式，`V` 會是整行選取的模式

## 編輯

- `o` 與 `O` : 往下與往上插入一行並進入編輯模式
- `J` : 刪除後面的換行
- `i` 與 `I` : 進入編輯模式
  - `i` : 從字元的前方開始
  - `I` : 跳至該行的行首開始
- `a` 與 `A` : 進入編輯模式
  - `a` : 從字元的後方開始
  - `A` : 跳至該行的行尾開始
- `x` 與 `X` : 刪除字元
  - `X` : 刪除游標前一個的字元
- `s` 與 `S` : 刪除並進入編輯模式
  - `s` : 刪除字元
  - `S` : 刪除整行
- `y` 與 `Y` : 選取範圍或是拷貝整行拷貝 YY
- `p` 與 `P` : 在字元的後方貼上與前方貼上
- `d` 、 `dd` 與 `D` : 刪除
  - `d` : 選取範圍後，進行刪除
  - `dd` : 刪除整行
  - `D` : 刪除該字元
- `>` 與 `<` : 縮排與反縮排

  - 在單行下，可以使用 `>>` 與 `<<` 快速進行縮排與反縮排
  - 多行縮排需要先選取想要的範圍在輸入 `> <`，可以搭配數字 `5>` 使用

  > 預設中，刪除與複製的內容都會進入預設共用的剪貼簿
  >
  > 但剪貼簿有多個，也有給複製單獨使用的剪貼簿
  >
  > 可以在複製時選擇要使用哪個剪貼簿

## 編輯進階技巧

### 針對成對符號內下命令

| 命令 (operator) | 是否包含成對符號 | 成對符號 (不區分 open/close)) |
| --------------- | ---------------- | ----------------------------- |
| `v`             | `i`              | `{ }`, aka `B`, Brace         |
| `d`             | `a`              | `( )`, aka `b`, brace         |
| `c`             |                  | `[ ]`                         |
| `y`             |                  | `'` 與 `"` : 不分 open close  |
|                 |                  | `< >`                         |
|                 |                  | `t` : tag                     |
|                 |                  | `w` : word                    |

### 針對成對符號本身做事

- 使用前請在 Vim 的設定中開啟

  ```text
  set surround
  ```

- 修改成對符號
  1. `c` : change
  2. `s` : surround
  3. original : 成對符號
  4. new : 新的成對符號
- 刪除成對符號
  1. `d` : delete
  2. `s` : surround
  3. 選擇成對符號
- 針對某一個範圍加上成對符號
  1. 先選取一段範圍
  2. `S` : 選擇成對符號

## 視窗

- `zz` : 將游標所在的該行，移動至畫面正中央

## 參考資料

- [將 Vim 中程式碼排版的 Tab 字元轉為等寬的空白字元](https://blog.gtwang.org/linux/vim-convert-tab-to-space-character/)
- [菜鳥教程 - Linux Vi/Vim](https://www.runoob.com/linux/linux-vim.html)
